extends base

block sideBar
    aside(class='sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 bg-gradient-dark' id='sidenav-main')
        div(class='sidenav-header')
            i(class='fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none' aria-hidden='true' id='iconSidenav')
            a(class='navbar-brand m-0' href='' target='_blank')
                span(class='ms-1 font-weight-bold text-white') District Panchayat-Patan
        hr(class='horizontal light mt-0 mb-2')
        div(class='collapse navbar-collapse  w-auto' id='sidenav-collapse-main')
            ul(class='navbar-nav')
                li(class='nav-item')
                    a(class='nav-link text-white active bg-gradient-primary' href='/adminDashboard/digitalDesk')
                        div(class='text-white text-center me-2 d-flex align-items-center justify-content-center')
                            i(class='material-icons opacity-10') dashboard 
                        span(class='nav-link-text ms-1') Digital Desk
                li(class='nav-item')
                    a(class='nav-link text-white active bg-gradient-dark' href='/adminDashboard/physicalDesk')
                        div(class='text-white text-center me-2 d-flex align-items-center justify-content-center')
                            i(class='material-icons opacity-10') table_view 
                        span(class='nav-link-text ms-1') Physical Desk
                li(class='nav-item')
                    a(class='nav-link text-white active bg-gradient-dark' href='/adminDashboard/trackFiles')
                        div(class='text-white text-center me-2 d-flex align-items-center justify-content-center')
                            i(class='material-icons opacity-10') receipt_long
                        span(class='nav-link-text ms-1') Track a file
                li(class='nav-item')
                    a(class='nav-link text-white active bg-gradient-dark' href='/adminDashboard/createUser')
                        div(class='text-white text-center me-2 d-flex align-items-center justify-content-center')
                            i(class='material-icons opacity-10') person_add 
                        span(class='nav-link-text ms-1') Create a User
                li(class='nav-item')
                    a(class='nav-link text-white active bg-gradient-dark' href='/adminDashboard/handleTransfer')
                        div(class='text-white text-center me-2 d-flex align-items-center justify-content-center')
                            i(class='material-icons opacity-10') swap_horiz
                        span(class='nav-link-text ms-1') Handle Transfer
block heading 
    include _header
block content
    .container-fluid.py-4
        .row
            .col-xl-3.col-sm-6.mb-xl-0.mb-4
                .card
                  .card-header.p-3.pt-2
                    .icon.icon-lg.icon-shape.bg-gradient-primary.shadow-primary.text-center.border-radius-xl.mt-n4.position-absolute
                      i.material-icons.opacity-10
                        svg.bi.bi-file-earmark-plus-fill(xmlns='http://www.w3.org/2000/svg' width='27' height='27' fill='currentColor' viewbox='0 0 16 16')
                          path(d='M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0z')
                    .text-end.pt-1(style='height: 50px;')
                      button.btn.text-capitalize(type='button' data-bs-toggle='modal' data-bs-target='#modal1')
                        h4.mb-0 Add a New File
                      #modal1.modal.fade(tabindex='-1' aria-labelledby='modal1' aria-hidden='true')
                        .modal-dialog
                          .modal-content(style='height: 280px;width: 606px;')
                            .modal-header(style='height:50px;')
                              h5#exampleModalLabel1.modal-title Add a File
                              button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close' style='height: 13px;width: 13px;color: black;')
                            .modal-body
                              form
                                div(style='font-size: 25px;padding: 0px;')
                                  label.col-form-label(for='recipient-name' style='float: left;')
                                    | Generate a File
                                    | ID
                                  .card-footer.p-2
                                    button.btn.bg-gradient-dark.mb-0(type='button') Generate
                                .mb-3(style='padding-top: 6px;')
                                  label.col-form-label(for='message-text' style='font-size: 17px; padding:0px;float: left;') Your Unique File ID is:
                                .card-footer.p-2
                                  button.btn.bg-gradient-dark.mb-0(type='button') Upload a Document
                            .modal-footer(style='height: 60px;')
                              button.btn.btn-secondary(type='button' data-bs-dismiss='modal') Close
                              button.btn.btn-primary(type='button' data-bs-dismiss='modal') Add

        // ---------------------------------------------------------------------------------------------
        .row.mt-4
        // -----------LIST      ---------------------------------------------------------------------------------
        .row.mb-4
            .card
                .card-header.pb-0
                    .row
                        .col-lg-6.col-7
                            h6 List on files currently on your Digital Desk
                        .col-lg-6.col-5.my-auto.text-end

                .card-body.px-0.pb-2
                    .table-responsive
                        table.table.align-items-center.mb-0
                            thead(style='width: 597px;')
                                tr
                                    th.text-uppercase.text-secondary.text-lg.font-weight-bolder.opacity-7(scope='col' width='150' style='width: 404px; font-size: 2px;') Subject
                                    th.text-uppercase.text-secondary.text-lg.font-weight-bolder.opacity-7.ps-2.Filename(scope='col' style='width: 252px;') Sender
                                    th.text-uppercase.text-secondary.text-lg.font-weight-bolder.opacity-7(scope='col' style='width: 152px;') Date
                                    th.text-uppercase.text-secondary.text-lg.font-weight-bolder.opacity-7(scope='col' style='width: 282px;') File ID
                                    th.text-uppercase.text-secondary.text-lg.font-weight-bolder.opacity-7(scope='col' style='width: 57px;text-align: center;') Details
                                    th.text-uppercase.text-secondary.text-lg.font-weight-bolder.opacity-7(scope='col' style='text-align: center;') Forward
                            tbody
                                each file in files
                                    tr.text-dark
                                        th(scope='Filename')= file.subject
                                        th.Sender=file.previousDesk.designation
                                        th= file.dateOfLastForward.toLocaleString('en-US',{month:'long',year:'numeric',day:'numeric'})
                                        th= file.id
                                        th.align-middle.text-center.text-sm
                                            a.nav-link(href='/file/'+file._id)
                                                div
                                                    button.btn.btn-outline-dark(type='button')
                                                        svg.bi.bi-info-circle-fill(xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewbox='0 0 16 16')
                                                            path(d='M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z')
                                        th.align-middle.text-center.text-sm
                                            div
                                                button.btn.text-capitalize.btn-outline-dark(type='button' data-bs-toggle='modal' data-bs-target='#modal3')
                                                    svg.bi.bi-send-fill(xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' viewbox='0 0 16 16')
                                                        path(d='M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z')